{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Activity,MessageSquare,Download,UserPlus}from'lucide-react';import{toast}from'sonner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=\"\".concat(BACKEND_URL,\"/api\");const Logs=()=>{const[logs,setLogs]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchLogs();},[]);const fetchLogs=async()=>{try{const response=await axios.get(\"\".concat(API,\"/logs\"));setLogs(response.data);}catch(error){toast.error('Erro ao carregar logs');}finally{setLoading(false);}};const getActionIcon=type=>{switch(type){case'extract':return/*#__PURE__*/_jsx(Download,{size:18,className:\"text-blue-400\"});case'message':return/*#__PURE__*/_jsx(MessageSquare,{size:18,className:\"text-purple-400\"});case'add_to_group':return/*#__PURE__*/_jsx(UserPlus,{size:18,className:\"text-green-400\"});default:return/*#__PURE__*/_jsx(Activity,{size:18,className:\"text-gray-400\"});}};const getActionLabel=type=>{switch(type){case'extract':return'Extração';case'message':return'Mensagem';case'add_to_group':return'Adicionar ao Grupo';default:return type;}};const getStatusColor=status=>{switch(status){case'success':return'text-neon';case'failed':return'text-red-500';case'in_progress':return'text-yellow-500';default:return'text-gray-400';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",\"data-testid\":\"logs-page\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-mono font-bold text-neon tracking-tight mb-2\",children:\"LOGS DE A\\xC7\\xD5ES\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Hist\\xF3rico de todas as opera\\xE7\\xF5es realizadas\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-neon border-r-transparent\"})}):logs.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#111111] border border-white/5 rounded-xl p-12 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-lg\",children:\"Nenhum log ainda\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"Os logs de a\\xE7\\xF5es aparecer\\xE3o aqui\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#111111] border border-white/5 rounded-xl overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-black/50 border-b border-white/5\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-mono text-gray-400\",children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-mono text-gray-400\",children:\"Conta\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-mono text-gray-400\",children:\"Alvo\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-mono text-gray-400\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-mono text-gray-400\",children:\"Detalhes\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-left text-sm font-mono text-gray-400\",children:\"Data\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs.map(log=>/*#__PURE__*/_jsxs(\"tr\",{\"data-testid\":\"log-row-\".concat(log.id),className:\"border-b border-white/5 hover:bg-white/5 transition-colors\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[getActionIcon(log.action_type),/*#__PURE__*/_jsx(\"span\",{className:\"text-white\",children:getActionLabel(log.action_type)})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-400\",children:log.account_phone}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-400\",children:log.target}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-bold \".concat(getStatusColor(log.status)),children:log.status.toUpperCase()})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-400\",children:log.details||'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 text-gray-400\",children:new Date(log.created_at).toLocaleString('pt-BR')})]},log.id))})]})})})]});};export default Logs;","map":{"version":3,"names":["React","useState","useEffect","axios","Activity","MessageSquare","Download","UserPlus","toast","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","Logs","logs","setLogs","loading","setLoading","fetchLogs","response","get","data","error","getActionIcon","type","size","className","getActionLabel","getStatusColor","status","children","length","map","log","id","action_type","account_phone","target","toUpperCase","details","Date","created_at","toLocaleString"],"sources":["/app/frontend/src/pages/Logs.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Activity, MessageSquare, Download, UserPlus } from 'lucide-react';\nimport { toast } from 'sonner';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\nconst Logs = () => {\n  const [logs, setLogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchLogs();\n  }, []);\n\n  const fetchLogs = async () => {\n    try {\n      const response = await axios.get(`${API}/logs`);\n      setLogs(response.data);\n    } catch (error) {\n      toast.error('Erro ao carregar logs');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getActionIcon = (type) => {\n    switch (type) {\n      case 'extract':\n        return <Download size={18} className=\"text-blue-400\" />;\n      case 'message':\n        return <MessageSquare size={18} className=\"text-purple-400\" />;\n      case 'add_to_group':\n        return <UserPlus size={18} className=\"text-green-400\" />;\n      default:\n        return <Activity size={18} className=\"text-gray-400\" />;\n    }\n  };\n\n  const getActionLabel = (type) => {\n    switch (type) {\n      case 'extract':\n        return 'Extração';\n      case 'message':\n        return 'Mensagem';\n      case 'add_to_group':\n        return 'Adicionar ao Grupo';\n      default:\n        return type;\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'success':\n        return 'text-neon';\n      case 'failed':\n        return 'text-red-500';\n      case 'in_progress':\n        return 'text-yellow-500';\n      default:\n        return 'text-gray-400';\n    }\n  };\n\n  return (\n    <div className=\"space-y-8\" data-testid=\"logs-page\">\n      <div>\n        <h1 className=\"text-4xl font-mono font-bold text-neon tracking-tight mb-2\">\n          LOGS DE AÇÕES\n        </h1>\n        <p className=\"text-gray-400\">Histórico de todas as operações realizadas</p>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12\">\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-neon border-r-transparent\"></div>\n        </div>\n      ) : logs.length === 0 ? (\n        <div className=\"bg-[#111111] border border-white/5 rounded-xl p-12 text-center\">\n          <p className=\"text-gray-400 text-lg\">Nenhum log ainda</p>\n          <p className=\"text-gray-500 mt-2\">Os logs de ações aparecerão aqui</p>\n        </div>\n      ) : (\n        <div className=\"bg-[#111111] border border-white/5 rounded-xl overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-black/50 border-b border-white/5\">\n                <tr>\n                  <th className=\"px-6 py-4 text-left text-sm font-mono text-gray-400\">Tipo</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-mono text-gray-400\">Conta</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-mono text-gray-400\">Alvo</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-mono text-gray-400\">Status</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-mono text-gray-400\">Detalhes</th>\n                  <th className=\"px-6 py-4 text-left text-sm font-mono text-gray-400\">Data</th>\n                </tr>\n              </thead>\n              <tbody>\n                {logs.map((log) => (\n                  <tr\n                    key={log.id}\n                    data-testid={`log-row-${log.id}`}\n                    className=\"border-b border-white/5 hover:bg-white/5 transition-colors\"\n                  >\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center space-x-2\">\n                        {getActionIcon(log.action_type)}\n                        <span className=\"text-white\">{getActionLabel(log.action_type)}</span>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 text-gray-400\">{log.account_phone}</td>\n                    <td className=\"px-6 py-4 text-gray-400\">{log.target}</td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`font-bold ${getStatusColor(log.status)}`}>\n                        {log.status.toUpperCase()}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 text-gray-400\">{log.details || '-'}</td>\n                    <td className=\"px-6 py-4 text-gray-400\">\n                      {new Date(log.created_at).toLocaleString('pt-BR')}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Logs;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}